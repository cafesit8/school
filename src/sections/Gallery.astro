---
import "photoswipe/style.css"
// import "@videojs/themes/dist/forest/index.css"
---

<section class="w-full m-auto px-3 bg-eucalyptus-50">
  <div class="max-w-7xl m-auto">
    <masonry-layout
      class="lg:mx-auto"
      id="gallery"
      cols="3"
      gap="15"
      maxcolwidth="100"
    >
      <a
        class="rounded-md overflow-hidden"
        href="/public/img1.jpg"
        data-pswp-width="1600"
        data-pswp-height="1600"
        target="_blank"
        data-cropped="true"
      >
        <img src="/public/img1.jpg" alt="" loading="lazy" />
      </a>
      <a
        class="rounded-md overflow-hidden"
        href="/public/img5.jpg"
        data-pswp-width="1600"
        data-pswp-height="1200"
        target="_blank"
      >
        <img src="/public/img5.jpg" alt="" />
      </a>
      <a
        class="rounded-md overflow-hidden"
        href="/public/img2.jpg"
        data-pswp-width="1600"
        data-pswp-height="1600"
        target="_blank"
      >
        <img src="/public/img2.jpg" alt="" />
      </a>
      <a
        class="rounded-md overflow-hidden"
        href="/public/img3.jpg"
        data-pswp-width="1600"
        data-pswp-height="1600"
        target="_blank"
      >
        <img src="/public/img3.jpg" alt="" />
      </a>
      <a
        class="rounded-md overflow-hidden"
        href="/public/img4.jpg"
        data-pswp-width="1600"
        data-pswp-height="1600"
        target="_blank"
      >
        <img src="/public/img4.jpg" alt="" />
      </a>
      <a
        class="rounded-md overflow-hidden"
        href="/public/img6.jpg"
        data-pswp-width="1600"
        data-pswp-height="1204"
        target="_blank"
      >
        <img src="/public/img6.jpg" alt="" />
      </a>
    </masonry-layout>
  </div>
</section>
<script>
  window.addEventListener("resize", () => {
    const $masonry = document.querySelector("masonry-layout")
    if (window.screen.width < 660) {
      $masonry?.setAttribute("cols", "2")
    } else {
      $masonry?.setAttribute("cols", "3")
    }
  })

  window.addEventListener("DOMContentLoaded", async () => {
    try {
      await import("@appnest/masonry-layout")
      const module = await import("photoswipe/lightbox")
      const PhotoSwipeLightbox = module.default
      const lightbox = new PhotoSwipeLightbox({
        gallery: "#gallery",
        children: "a",
        pswpModule: () => import("photoswipe"),
      })
      lightbox.init()
    } catch (error) {
      console.log(error)
    }
  })
  document.querySelector("masonry-layout")?.scheduleLayout()
</script>
